I'll read the key source files first to understand the billing system implementation.# Billing and Credit Issues

## Understanding Your Credits

### Checking Your Credit Balance

To view your current credit usage:

1. Open the main menu and select **Cost Analysis**
2. Your credit balance is displayed at the top of the page under "Subscription Status"
3. You'll see:
   - How many credits you've used this month
   - Your total monthly credit limit
   - How many credits remain
   - A progress bar showing your usage percentage

### Credit Usage Breakdown

**Free Plan:**
- 50 credits per month
- Credits reset at the start of each billing cycle

**Paid Plans:**
- Credit limits vary based on your selected plan (100 to 5,000+ credits)
- Credits reset monthly on your billing date
- Your next billing date is shown in the Cost Analysis page

## Common Credit Issues

### Out of Credits Error

If you see a message stating "Out of Credits" or "Your workspace has reached its credit limit":

**For Workspace Owners and Administrators:**

1. Navigate to the Cost Analysis page from the main menu
2. Click the **Upgrade to Paid** button (if on Free plan) or **Edit Plan** (if already on a paid plan)
3. Select a plan with more credits to meet your needs
4. Complete the payment process

**For Workspace Members:**

If you're not an owner or administrator, you'll need to contact your workspace administrator to upgrade the plan. You cannot make billing changes yourself.

### Credits Not Updating

If your credit balance appears incorrect:

1. Go to the Cost Analysis page
2. Click the **Refresh** button in the top-right corner of the Subscription Status section
3. Wait a few moments for the system to sync your latest usage

If credits still appear incorrect after refreshing, the system automatically syncs usage data from your workflow runs, so check back in a few minutes.

## Subscription Status Issues

### Understanding Subscription Status Labels

Your subscription status appears as a colored badge:

- **Active** (green): Your subscription is working normally
- **Exceeded** (red): You've used all available credits for the current billing period
- **Cancelling at period end** (red): Your subscription will end after the current billing cycle
- **New plan scheduled** (yellow): A different plan will activate after your current period ends

### Subscription Cancelled or Ending

If your subscription shows "Cancelling at period end":

1. Your current plan remains active until the end date shown
2. After this date, you'll be downgraded to the Free plan (50 credits/month)
3. To keep your paid plan:
   - Click **Edit Plan** on the Cost Analysis page
   - Select a new subscription tier
   - Complete the checkout process

### Scheduled Subscription Changes

If you see "New plan scheduled":

- A different credit plan will automatically activate after your current billing period
- Your current plan and credits remain active until the transition date
- To modify or cancel this scheduled change:
  1. Click **Edit Plan** on the Cost Analysis page
  2. Choose a different plan or reactivate your current plan
  3. Save your changes

## Payment Issues

### Payment Failed or Declined

If you receive a payment failure notification:

1. Go to the Cost Analysis page
2. Click **Manage Billing** (for paid plans)
3. Update your payment method in the billing portal
4. Try processing the payment again

Common reasons for payment failures:
- Insufficient funds
- Expired credit card
- Bank declining the transaction
- Incorrect billing address

### Updating Payment Information

To update your payment details:

1. Navigate to the Cost Analysis page
2. Click **Manage Billing**
3. You'll be redirected to the billing portal
4. Update your payment method, billing address, or other details
5. Save your changes

## Plan Management

### Upgrading Your Plan

To increase your monthly credit limit:

1. Go to the Cost Analysis page
2. Click **Upgrade to Paid** (Free plan) or **Edit Plan** (paid plan)
3. Review available credit tiers and pricing
4. Select the plan that fits your needs
5. Enter payment information and complete checkout

Your new credit limit becomes available immediately after upgrading.

### Downgrading Your Plan

To reduce your monthly credit limit:

1. Navigate to the Cost Analysis page
2. Click **Edit Plan**
3. Select a plan with fewer credits
4. Confirm your selection

**Important:** Downgrades typically take effect at the end of your current billing period, not immediately. You'll continue to have access to your current credit limit until the transition date.

### Cancelling Your Subscription

To cancel your paid subscription:

1. Open the Cost Analysis page
2. Click **Manage Billing**
3. In the billing portal, select the option to cancel your subscription
4. Confirm the cancellation

After cancelling:
- Your paid plan remains active until the end of the current billing period
- You'll retain your current credit limit until that date
- After the period ends, you'll be moved to the Free plan with 50 credits per month

## Understanding Billing Cycles

### When Credits Reset

Credits reset at the beginning of each billing cycle:

- **Free plan:** Credits reset on the 1st of each month
- **Paid plans:** Credits reset on your billing date (the date you first subscribed or upgraded)

Your next billing date is displayed on the Cost Analysis page under "Next billing date."

### Usage Tracking

The system tracks credit usage in real-time as you:
- Run workflows
- Execute automation tasks
- Use AI features

You can monitor your usage throughout the month on the Cost Analysis page to avoid running out of credits unexpectedly.

## Resolving Billing Discrepancies

### Credits Showing Wrong Amount

If your displayed credits don't match what you expect:

1. Click **Refresh** on the Cost Analysis page
2. Wait 30-60 seconds for data to sync
3. Reload the page in your browser

If the issue persists, verify:
- You're viewing the correct workspace (check the workspace name at the top)
- Your subscription is active (check the status badge)
- Recent workflow runs are counted in usage

### Charged Wrong Amount

If you believe you were charged incorrectly:

1. Go to the Cost Analysis page
2. Click **Manage Billing**
3. Review your invoice history in the billing portal
4. Verify the plan and billing cycle dates

Each plan tier has a fixed monthly rate based on the number of credits included.

### Double Charged or Multiple Subscriptions

If you see multiple charges or subscriptions:

1. Navigate to Cost Analysis
2. Click **Manage Billing**
3. Check active subscriptions in the billing portal
4. Cancel any duplicate or unwanted subscriptions

Only one subscription should be active per workspace at a time.

## Optimizing Credit Usage

### Making Credits Last Longer

To get the most from your monthly credits:

- Review which workflows consume the most credits
- Avoid running unnecessary test workflows
- Archive or pause workflows you're not actively using
- Choose the appropriate plan size based on typical monthly usage

### Choosing the Right Plan

Select a plan based on your typical usage:

1. Review your usage history on the Cost Analysis page
2. Note your average monthly credit consumption
3. Choose a plan with 10-20% more credits than your average use
4. Upgrade if you consistently run out before month-end
5. Downgrade if you regularly have unused credits

You can change plans at any time to match your actual needs.

## Getting Help with Billing

### When to Contact Support

Contact support if you experience:

- Payments processing but credits not appearing
- Unable to upgrade despite successful payment
- Subscription status showing incorrectly after multiple refreshes
- Unexpected charges or billing errors
- Account locked due to billing issues

### Information to Provide

When contacting support about billing issues, have ready:

- Your workspace name
- Current plan and subscription status
- Description of the issue
- Any error messages you've received
- Screenshots of the Cost Analysis page (if relevant)

This information helps resolve billing issues more quickly.